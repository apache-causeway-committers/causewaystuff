// Auto-generated by Causeway-Stuff code generator.
package survey.dom;

import io.github.causewaystuff.companion.applib.services.lookup.DependantLookupService;
import io.github.causewaystuff.companion.applib.services.lookup.ForeignKeyLookupService;
import io.github.causewaystuff.companion.applib.services.search.SearchService;
import jakarta.inject.Inject;
import java.lang.String;
import javax.annotation.processing.Generated;
import lombok.RequiredArgsConstructor;
import org.apache.causeway.applib.annotation.Action;
import org.apache.causeway.applib.annotation.ActionLayout;
import org.apache.causeway.applib.annotation.LabelPosition;
import org.apache.causeway.applib.annotation.MemberSupport;
import org.apache.causeway.applib.annotation.ParameterLayout;
import org.apache.causeway.applib.annotation.SemanticsOf;
import org.apache.causeway.applib.services.repository.RepositoryService;

@Generated("io.github.causewaystuff.companion.codegen.domgen._GenDeleteMixin")
@Action(
        semantics = SemanticsOf.IDEMPOTENT_ARE_YOU_SURE
)
@ActionLayout(
        fieldSetId = "details",
        sequence = "9",
        describedAs = "Delete this Campaign",
        position = ActionLayout.Position.PANEL
)
@RequiredArgsConstructor
public class Campaign_delete {
    @Inject
    DependantLookupService dependantService;

    @Inject
    ForeignKeyLookupService foreignKeyLookup;

    @Inject
    RepositoryService repositoryService;

    @Inject
    SearchService searchService;

    private final Campaign mixee;

    @MemberSupport
    public Campaign.Manager act(@ParameterLayout(labelPosition = LabelPosition.TOP, multiLine = 12) String dependants) {
        repositoryService.remove(mixee);
        foreignKeyLookup.clearCache(mixee.getClass());
        return new Campaign.Manager(searchService, "");
    }

    @MemberSupport
    public String default0Act() {
        return dependantService.findAllDependantsAsMultilineString(mixee);
    }
}
